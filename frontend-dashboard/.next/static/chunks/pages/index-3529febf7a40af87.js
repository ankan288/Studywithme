(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{3454:function(e,t,s){"use strict";var l,a;e.exports=(null==(l=s.g.process)?void 0:l.env)&&"object"==typeof(null==(a=s.g.process)?void 0:a.env)?s.g.process:s(7663)},8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(1190)}])},2217:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(3759).Z)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]])},9176:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(3759).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},1190:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Z}});var l,a,i=s(5893),n=s(7294),r=s(1664),c=s.n(r),o=s(3759);let d=(0,o.Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),x=(0,o.Z)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),h=(0,o.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),u=s(3454).env.NEXT_PUBLIC_API_URL||"http://localhost:3000",m=async()=>{try{let e=await fetch("".concat(u,"/api/dashboard/metrics"));return await e.json()}catch(e){return console.error("[Dashboard API Error]",e),{success:!1,error:"Failed to fetch dashboard metrics"}}};var p=s(9176);let f=(0,o.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),b=(0,o.Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),g=(0,o.Z)("AlertOctagon",[["polygon",{points:"7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2",key:"h1p8hx"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),j=e=>{let{metrics:t}=e;return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,i.jsx)(v,{icon:p.Z,label:"Total Students",value:t.totalStudents,color:"bg-blue-50 text-blue-600"}),(0,i.jsx)(v,{icon:f,label:"Avg. Mastery",value:"".concat(t.avgMastery,"%"),color:"bg-emerald-50 text-emerald-600"}),(0,i.jsx)(v,{icon:b,label:"Active (7d)",value:t.activeStudentsLast7Days,color:"bg-indigo-50 text-indigo-600"}),(0,i.jsx)(v,{icon:g,label:"At-Risk Topics",value:t.topicsAtRisk.length,color:"bg-red-50 text-red-600"})]}),(0,i.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[(0,i.jsx)("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"Topic Performance Watchlist"}),0===t.topicsAtRisk.length?(0,i.jsxs)("div",{className:"text-center py-8 text-slate-400",children:[(0,i.jsx)(y,{}),(0,i.jsx)("p",{className:"mt-2",children:"All topics are performing well."})]}):(0,i.jsx)("div",{className:"space-y-4",children:t.topicsAtRisk.map((e,t)=>(0,i.jsxs)("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-100",children:[(0,i.jsx)("span",{className:"font-medium text-red-800",children:e.topic}),(0,i.jsxs)("span",{className:"font-bold text-red-600",children:[e.avgScore.toFixed(0),"%"]})]},t))})]})]})},v=e=>{let{icon:t,label:s,value:l,color:a}=e;return(0,i.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-center gap-4",children:[(0,i.jsx)("div",{className:"p-3 rounded-lg ".concat(a),children:(0,i.jsx)(t,{size:24})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-slate-500",children:s}),(0,i.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:l})]})]})},y=()=>(0,i.jsx)("svg",{className:"w-12 h-12 mx-auto text-emerald-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})});(l=a||(a={})).Core="Core",l.Applied="Applied",l.Mastery="Mastery";let N=e=>{let{distribution:t,total:s}=e,l=e=>s>0?e/s*100:0;return(0,i.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[(0,i.jsx)("h3",{className:"text-lg font-bold text-slate-800 mb-6",children:"Learning Depth Distribution"}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsx)(w,{label:"Core (Fundamentals)",percent:l(t.Core),count:t.Core,color:"bg-blue-500"}),(0,i.jsx)(w,{label:"Applied (Practice)",percent:l(t.Applied),count:t.Applied,color:"bg-emerald-500"}),(0,i.jsx)(w,{label:"Mastery (Deep Dive)",percent:l(t.Mastery),count:t.Mastery,color:"bg-purple-500"})]}),(0,i.jsx)("div",{className:"mt-6 pt-4 border-t border-slate-100",children:(0,i.jsx)("p",{className:"text-xs text-slate-400",children:"* Shows the proportion of interactions at each depth level across all sessions."})})]})},w=e=>{let{label:t,percent:s,count:l,color:a}=e;return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,i.jsx)("span",{className:"text-sm font-medium text-slate-700",children:t}),(0,i.jsxs)("span",{className:"text-sm font-bold text-slate-900",children:[l," (",s.toFixed(1),"%)"]})]}),(0,i.jsx)("div",{className:"w-full bg-slate-100 rounded-full h-2.5",children:(0,i.jsx)("div",{className:"h-2.5 rounded-full transition-all duration-500 ".concat(a),style:{width:"".concat(s,"%")}})})]})},k=(0,o.Z)("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),T=(0,o.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),A=e=>{let{flagCount:t,totalInteractions:s}=e,l=s>0?(s-t)/s*100:100;return(0,i.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm h-full flex flex-col",children:[(0,i.jsxs)("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[(0,i.jsx)(k,{className:"text-indigo-600"})," Ethics & Compliance"]}),(0,i.jsxs)("div",{className:"flex-1 flex flex-col justify-center items-center text-center",children:[(0,i.jsxs)("div",{className:"relative w-32 h-32 mb-4",children:[(0,i.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 36 36",children:[(0,i.jsx)("path",{className:"text-slate-100",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{className:"text-indigo-600 transition-all duration-1000",strokeDasharray:"".concat(l,", 100"),d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"4"})]}),(0,i.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center flex-col",children:[(0,i.jsxs)("span",{className:"text-3xl font-bold text-slate-800",children:[l.toFixed(1),"%"]}),(0,i.jsx)("span",{className:"text-[10px] text-slate-400 uppercase",children:"Compliance"})]})]}),(0,i.jsxs)("div",{className:"w-full flex justify-between px-4 py-2 bg-slate-50 rounded-lg",children:[(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("span",{className:"block text-xs text-slate-500",children:"Interventions"}),(0,i.jsx)("span",{className:"block text-lg font-bold text-amber-500",children:t})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("span",{className:"block text-xs text-slate-500",children:"Total Queries"}),(0,i.jsx)("span",{className:"block text-lg font-bold text-slate-700",children:s})]})]}),t>0&&(0,i.jsxs)("div",{className:"mt-4 flex items-start gap-2 text-left p-3 bg-amber-50 rounded-lg border border-amber-100 text-xs text-amber-800",children:[(0,i.jsx)(T,{size:14,className:"mt-0.5 shrink-0"}),(0,i.jsxs)("p",{children:[t," attempts to solicit direct answers were detected and neutralized by the Ethics Guard."]})]})]})]})};var C=s(2217);let M=(0,o.Z)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),L=e=>{let{avgAlignment:t,avgClarity:s}=e;return(0,i.jsxs)("div",{className:"bg-slate-900 text-white p-6 rounded-xl shadow-lg relative overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute top-0 right-0 p-3 opacity-10",children:(0,i.jsx)(C.Z,{size:120})}),(0,i.jsxs)("h3",{className:"text-lg font-bold mb-6 flex items-center gap-2",children:[(0,i.jsx)(M,{className:"text-yellow-400"})," System Health"]}),(0,i.jsxs)("div",{className:"space-y-6 relative z-10",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,i.jsx)("span",{className:"text-sm text-slate-300",children:"Depth Alignment Score"}),(0,i.jsxs)("span",{className:"font-bold text-emerald-400",children:[(100*t).toFixed(0),"%"]})]}),(0,i.jsx)("div",{className:"w-full bg-slate-700 rounded-full h-2",children:(0,i.jsx)("div",{className:"bg-emerald-500 h-2 rounded-full",style:{width:"".concat(100*t,"%")}})})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,i.jsx)("span",{className:"text-sm text-slate-300",children:"Response Clarity Index"}),(0,i.jsxs)("span",{className:"font-bold text-blue-400",children:[(100*s).toFixed(0),"%"]})]}),(0,i.jsx)("div",{className:"w-full bg-slate-700 rounded-full h-2",children:(0,i.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"".concat(100*s,"%")}})})]})]}),(0,i.jsx)("div",{className:"mt-6 text-xs text-slate-500",children:"Metrics computed real-time via internal rule-based evaluation."})]})};function Z(){let[e,t]=(0,n.useState)(null),[s,l]=(0,n.useState)(!0),[a,r]=(0,n.useState)("teacher"),o=async()=>{l(!0);let e=await m();e.success&&e.data&&t(e.data),l(!1)};return(0,n.useEffect)(()=>{o()},[]),(0,i.jsxs)("div",{className:"min-h-screen bg-slate-100 flex flex-col font-sans text-slate-900",children:[(0,i.jsxs)("header",{className:"bg-white border-b border-slate-200 h-16 flex items-center justify-between px-6 shadow-sm sticky top-0 z-10",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"bg-indigo-600 text-white p-2 rounded-lg",children:(0,i.jsx)(d,{size:20})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"font-bold text-lg leading-tight text-slate-800",children:"StudyWithMe Dashboard"}),(0,i.jsx)("p",{className:"text-[10px] text-slate-500 uppercase tracking-wider font-semibold",children:"teacher"===a?"Teacher View":"Institution Audit"})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsxs)("div",{className:"bg-slate-100 p-1 rounded-lg flex text-sm font-medium",children:[(0,i.jsx)("button",{onClick:()=>r("teacher"),className:"px-4 py-1.5 rounded-md transition-all ".concat("teacher"===a?"bg-white shadow-sm text-indigo-700":"text-slate-500 hover:text-slate-700"),children:"Teacher"}),(0,i.jsx)("button",{onClick:()=>r("institution"),className:"px-4 py-1.5 rounded-md transition-all ".concat("institution"===a?"bg-white shadow-sm text-indigo-700":"text-slate-500 hover:text-slate-700"),children:"Institution"})]}),(0,i.jsx)("button",{onClick:o,className:"p-2 hover:bg-slate-50 rounded-full text-slate-400 hover:text-indigo-600 transition-colors",children:(0,i.jsx)(x,{size:18,className:s?"animate-spin":""})}),(0,i.jsx)("div",{className:"h-6 w-px bg-slate-200"}),(0,i.jsxs)(c(),{href:"http://localhost:3001",className:"flex items-center gap-2 text-sm font-medium text-slate-500 hover:text-slate-800",children:[(0,i.jsx)(h,{size:16}),"Back to App"]})]})]}),(0,i.jsx)("main",{className:"flex-1 p-8 overflow-y-auto",children:s||!e?(0,i.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,i.jsxs)("div",{className:"animate-pulse flex flex-col items-center",children:[(0,i.jsx)("div",{className:"w-12 h-12 bg-slate-200 rounded-full mb-4"}),(0,i.jsx)("div",{className:"h-4 w-32 bg-slate-200 rounded"})]})}):(0,i.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8 animate-in fade-in duration-500",children:["teacher"===a&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("section",{children:[(0,i.jsx)("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Class Progress Overview"}),(0,i.jsx)(j,{metrics:e.teacher})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsx)(N,{distribution:e.institution.depthDistribution,total:e.institution.totalInteractions}),(0,i.jsxs)("div",{className:"bg-indigo-50 border border-indigo-100 rounded-xl p-6 flex flex-col justify-center",children:[(0,i.jsx)("h3",{className:"text-lg font-bold text-indigo-900 mb-2",children:"Instructor Insight"}),(0,i.jsxs)("p",{className:"text-indigo-700 mb-4",children:["Based on recent activity, ",(0,i.jsx)("strong",{children:"Core"})," concepts are well understood. Consider assigning more ",(0,i.jsx)("strong",{children:"Applied"})," tasks to bridge the gap to Mastery."]}),(0,i.jsx)("button",{className:"self-start bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-indigo-700",children:"Generate Applied Assignment"})]})]})]}),"institution"===a&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("section",{children:[(0,i.jsx)("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"System Audit"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,i.jsx)(L,{avgAlignment:e.institution.avgDepthAlignment,avgClarity:e.institution.avgClarity}),(0,i.jsx)(A,{flagCount:e.institution.ethicsFlagCount,totalInteractions:e.institution.totalInteractions}),(0,i.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[(0,i.jsx)("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"Depth Compliance"}),(0,i.jsx)("p",{className:"text-sm text-slate-500 mb-4",children:"Ensure system is not defaulting to surface-level answers."}),(0,i.jsx)(N,{distribution:e.institution.depthDistribution,total:e.institution.totalInteractions})]})]})]}),(0,i.jsxs)("section",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[(0,i.jsx)("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:"Transparency Log"}),(0,i.jsx)("p",{className:"text-sm text-slate-500 mb-6",children:"Recent system interventions and policy triggers."}),(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,i.jsx)("thead",{className:"bg-slate-50 text-slate-500 uppercase font-bold text-xs",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"px-4 py-3 rounded-l-lg",children:"Time"}),(0,i.jsx)("th",{className:"px-4 py-3",children:"Mode"}),(0,i.jsx)("th",{className:"px-4 py-3",children:"Depth"}),(0,i.jsx)("th",{className:"px-4 py-3",children:"Ethics Flag"}),(0,i.jsx)("th",{className:"px-4 py-3 rounded-r-lg",children:"Quality Score"})]})}),(0,i.jsx)("tbody",{className:"divide-y divide-slate-100",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,i.jsxs)("tr",{className:"hover:bg-slate-50",children:[(0,i.jsx)("td",{className:"px-4 py-3 text-slate-500",children:"Just now"}),(0,i.jsx)("td",{className:"px-4 py-3 font-medium",children:"Learning"}),(0,i.jsx)("td",{className:"px-4 py-3",children:(0,i.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-bold",children:"Core"})}),(0,i.jsx)("td",{className:"px-4 py-3 text-emerald-600",children:"Pass"}),(0,i.jsx)("td",{className:"px-4 py-3 font-bold text-slate-800",children:"0.98"})]},t))})]})})]})]})]})})]})}},7663:function(e){!function(){var t={229:function(e){var t,s,l,a=e.exports={};function i(){throw Error("setTimeout has not been defined")}function n(){throw Error("clearTimeout has not been defined")}function r(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{s="function"==typeof clearTimeout?clearTimeout:n}catch(e){s=n}}();var c=[],o=!1,d=-1;function x(){o&&l&&(o=!1,l.length?c=l.concat(c):d=-1,c.length&&h())}function h(){if(!o){var e=r(x);o=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,o=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===n||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function u(e,t){this.fun=e,this.array=t}function m(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];c.push(new u(e,t)),1!==c.length||o||r(h)},u.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},s={};function l(e){var a=s[e];if(void 0!==a)return a.exports;var i=s[e]={exports:{}},n=!0;try{t[e](i,i.exports,l),n=!1}finally{n&&delete s[e]}return i.exports}l.ab="//";var a=l(229);e.exports=a}()}},function(e){e.O(0,[553,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);